!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):n.TinyScrollListener=e()}(this,function(){"use strict";return function n(e){var o=e.distanceToReachEnd,t=void 0===o?100:o,i=e.onEndReached,c=void 0===i?function(){}:i,r=e.element,s=e.distanceEvents,u=void 0===s?[]:s;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.endReacher={working:!0,pausing:!1,pause:function(){this.pausing=!0},continue:function(){this.pausing=!1}};var l=this;if(void 0===r)throw Error("Need Scroll-Container!");var f=r===document.body,a=!1,d=void 0,h=u.map(function(n){var e=n.distance;return r.scrollTop>e?"outside":"inside"});return l.destroy=function(){f?document.removeEventListener("scroll",d):r.removeEventListener("scroll",d)},d=function(n){a||(requestAnimationFrame(function(){(function(n){var a=this,d=f?document.documentElement.scrollTop:this.scrollTop;n.stopPropagation(),u.forEach(function(n,e){var o=n.distance,t=void 0===o?-1:o,i=n.onGoingIn,c=void 0===i?function(){return console.log("on going in")}:i,r=n.onGoingOut,s=void 0===r?function(){return console.log("on going out")}:r;switch(h[e]){case"inside":t<d&&(s.call(a,l),h[e]="outside");break;case"outside":d<=t&&(c.call(a,l),h[e]="inside")}}),l.endReacher.working&&!l.endReacher.pausing&&this.scrollTop+this.offsetHeight+t>this.scrollHeight&&(l.endReacher.pause(),c.call(this,function(n){l.endReacher.continue(),n&&(0===u.length?l.destroy():l.endReacher.working=!1)}))}).call(r,n),a=!1}),a=!0)},f?document.addEventListener("scroll",d):r.addEventListener("scroll",d),l}});
